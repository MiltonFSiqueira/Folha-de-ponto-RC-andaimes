<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RC Andaimes - Controle de Ponto</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <nav>
      <ul>
        <li><a href="#" id="cadastro-btn">Cadastro</a></li>
        <li><a href="#" id="registro-btn">Registro de Ponto</a></li>
        <li><a href="#" id="relatorios-btn">Relatórios</a></li>
      </ul>
    </nav>
  </header>
  <main>
    <section id="cadastro">
      <h2>Cadastro de Colaborador</h2>
      <form>
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome"><br><br>
        <label for="email">E-mail:</label>
        <input type="email" id="email" name="email"><br><br>
        <label for="senha">Senha:</label>
        <input type="password" id="senha" name="senha"><br><br>
        <button id="cadastro-submit">Cadastrar</button>
      </form>
    </section>
    <section id="registro-ponto">
      <h2>Registro de Ponto</h2>
      <form>
        <label for="tipo-ponto">Tipo de Ponto:</label>
        <select id="tipo-ponto" name="tipo-ponto">
          <option value="entrada">Entrada</option>
          <option value="saida">Saída</option>
        </select><br><br>
        <button id="registro-submit">Registrar Ponto</button>
      </form>
    </section>
    <section id="relatorios">
      <h2>Relatórios de Ponto</h2>
      <table id="relatorios-table">
        <thead>
          <tr>
            <th>Data</th>
            <th>Tipo de Ponto</th>
          </tr>
        </thead>
        <tbody id="relatorios-tbody">
          <!-- dados serão carregados aqui -->
        </tbody>
      </table>
      <button id="enviar-relatorio-email">Enviar Relatório por E-mail</button>
      <button id="enviar-relatorio-whatsapp">Enviar Relatório por WhatsApp</button>
    </section>
  </main>
  <script>

const cadastroBtn = document.querySelector('#cadastro-btn');
const registroBtn = document.querySelector('#registro-btn');
const relatoriosBtn = document.querySelector('#relatorios-btn');
const cadastroForm = document.querySelector('#cadastro form');
const registroForm = document.querySelector('#registro-ponto form');
const relatoriosTable = document.querySelector('#relatorios-table');
const enviarRelatorioEmailBtn = document.querySelector('#enviar-relatorio-email');
const enviarRelatorioWhatsAppBtn = document.querySelector('#enviar-relatorio-whatsapp');

cadastroBtn.addEventListener('click', () => {
  cadastroForm.style.display = 'block';
  registroForm.style.display = 'none';
  relatoriosTable.style.display = 'none';
});

registroBtn.addEventListener('click', () => {
  cadastroForm.style.display = 'none';
  registroForm.style.display = 'block';
  relatoriosTable.style.display = 'none';
});

relatoriosBtn.addEventListener('click', () => {
  cadastroForm.style.display = 'none';
  registroForm.style.display = 'none';
  relatoriosTable.style.display = 'block';
});

// Função para cadastrar colaborador
async function cadastrarColaborador(event) {
  event.preventDefault();
  const nome = document.querySelector('#nome').value;
  const email = document.querySelector('#email').value;
  const senha = document.querySelector('#senha').value;
  try {
    const response = await fetch('/cadastrar-colaborador', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ nome, email, senha })
    });
    const data = await response.json();
    console.log(data);
  } catch (err) {
    console.error(err);
  }
}

cadastroForm.addEventListener('submit', cadastrarColaborador);

// Função para registrar ponto
async function registrarPonto(event) {
  event.preventDefault();
  const tipoPonto = document.querySelector('#tipo-ponto').value;
  try {
    const response = await fetch('/registrar-ponto', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ tipoPonto })
    });
    const data = await response.json();
    console.log(data);
  } catch (err) {
    console.error(err);
  }
}

registroForm.addEventListener('submit', registrarPonto);

// Função para carregar relatórios
async function carregarRelatorios() {
  try {
    const response = await fetch('/carregar-relatorios');
    const data = await response.json();
    const relatorios = data.relatorios;
    relatorios.forEach((relatorio) => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${relatorio.data}</td>
        <td>${relatorio.tipoPonto}</td>
      `;
      relatoriosTable.tBodies[0].appendChild(row);
    });
  } catch (err) {
    console.error(err);
  }
}

carregarRelatorios();

// Função para enviar relatório por e-mail
async function enviarRelatorioEmail() {
  try {
    const response = await fetch('/enviar-relatorio-email');
    const data = await response.json();
    console.log(data);
  } catch (err) {
    console.error(err);
  }
}

enviarRelatorioEmailBtn.addEventListener('click', enviarRelatorioEmail);

// Função para enviar relatório por WhatsApp
async function enviarRelatorioWhatsApp() {
  try {
    const response = await fetch('/enviar-relatorio-whatsapp');
    const data = await response.json();
    console.log(data);
  } catch (err) {
    console.error(err);
  }
}

enviarRelatorioWhatsAppBtn.addEventListener('click', enviarRelatorioWhatsApp);
  </script>
  <script src="script.js"></script>
</body>
</html>


    

     